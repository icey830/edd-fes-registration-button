!function(e){function t(t){var i,n,o=t.serialize(),s=[];return e(".fes-rich-validation").each(function(t,o){i=e(o).data("id"),n=e.trim(tinyMCE.get(i).getContent()),s.push(i+"="+encodeURIComponent(n))}),o=o+"&"+s.join("&")}e(".edd-fes-registration-button-form").on("submit",function(i){i.preventDefault();var n=e(this),o=n.find("input[type=submit]"),s=t(n);if(""!=fes_form.loading_icon)var r=fesSpinner({text:fes_form.loadingtext,icon:fes_form.loading_icon});else{var a={lines:13,length:11,width:5,radius:17,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"fes_spinner",zIndex:2e9,top:"auto",left:"auto"},d=document.createElement("div");document.body.appendChild(d);var l=new Spinner(a).spin(d),r=fesSpinner({text:fes_form.loadingtext,spinner:l})}s&&(o.attr("disabled","disabled").addClass("button-primary-disabled"),e.post(registration_button.ajax.url,s,function(e){var t="",i="";if(e.success)e.title&&(t=e.title),e.message&&(i=e.message),e.skipswal?(r.hide(),"#"!==e.redirect_to&&(window.location=e.redirect_to)):(r.hide(),swal({title:t,text:i,html:!0,allowEscapeKey:!1,type:"success"},function(){"#"!==e.redirect_to?window.location.href=e.redirect_to:(o.removeClass("button-primary-disabled"),n.find("span.fes-loading").remove(),o.removeAttr("disabled"))}));else{e.errors;e.title&&(t=e.title),e.message&&(i=e.message),r.hide(),swal({title:t,text:i,html:!0,type:"error"}),o.removeAttr("disabled")}o.removeClass("button-primary-disabled"),n.find("span.fes-loading").remove()}).fail(function(t,i,s){var a="Could not connect",d=e(t.responseponseText).text();console.log(d),d=d.substring(0,d.indexOf("Call Stack")),r.hide(),swal({title:a,text:d,html:!0,type:"error"}),o.removeAttr("disabled"),o.removeClass("button-primary-disabled"),n.find("span.fes-loading").remove()}))})}(jQuery);